## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
git clone <–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π>
cd waba-ai-analyzer

# –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º (Windows)
venv\Scripts\activate
# –ò–ª–∏ Linux/Mac
source venv/bin/activate

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
# –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ - –∏—Å–ø—Ä–∞–≤–ª—è–µ–º –∏—Ö
python fix_deps.py

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º .env —Ñ–∞–π–ª
copy .env.example .env  # –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –≤—Ä—É—á–Ω—É—é
```

### 2. –ó–∞–ø–æ–ª–Ω—è–µ–º `.env` —Ñ–∞–π–ª
```env
# OpenAI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
OPENAI_API_KEY=sk-–≤–∞—à_–∫–ª—é—á_openai
OPENAI_MODEL=gpt-4o-mini  # –∏–ª–∏ gpt-3.5-turbo

# Wazzup (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å WhatsApp)
WAZZUP_API_KEY=–≤–∞—à_–∫–ª—é—á_wazzup
WAZZUP_CHANNEL_ID=id_–≤–∞—à–µ–≥–æ_whatsapp_–∫–∞–Ω–∞–ª–∞

# –°–µ—Ä–≤–µ—Ä
PORT=8000
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ run_server.py (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python run_server.py

# –°–ø–æ—Å–æ–± 2: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
python main.py

# –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ uvicorn
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:8000`

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Wazzup (WhatsApp)

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π Wazzup
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [wazzup.io](https://wazzup.io/)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WhatsApp Business –∫–∞–Ω–∞–ª
3. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è
4. –ù–∞–π–¥–∏—Ç–µ ID –∫–∞–Ω–∞–ª–∞ WhatsApp –≤ —Ä–∞–∑–¥–µ–ª–µ "–ö–∞–Ω–∞–ª—ã"

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–∞ (–ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π)
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º ngrok –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL
ngrok http 8000

# –ö–æ–ø–∏—Ä—É–µ–º https URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://abc123.ngrok.io)
# –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Wazzup:
URL: https://abc123.ngrok.io/webhook/wazzup
–°–æ–±—ã—Ç–∏—è: message, message.status, chat.closed
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
```bash
python test_wazzup.py
# –í—ã–±–∏—Ä–∞–µ–º –æ–ø—Ü–∏–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É:
# 1 ‚Üí –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Wazzup
# 3 ‚Üí –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤–µ–±—Ö—É–∫
# 4 ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
```

---

## API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `GET` | `/` | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–µ—Ä–≤–µ—Ä–µ |
| `GET` | `/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |
| `POST` | `/webhook/wazzup` | **–í–µ–±—Ö—É–∫ –æ—Ç Wazzup** (—Å—é–¥–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å–æ–æ–±—â–µ–Ω–∏—è) |
| `GET` | `/chats` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–∏–∞–ª–æ–≥–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π |
| `GET` | `/chats/{chat_id}` | –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–∏–∞–ª–æ–≥ |
| `POST` | `/analyze/{chat_id}` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –¥–∏–∞–ª–æ–≥–∞ —á–µ—Ä–µ–∑ –ò–ò |
| `GET` | `/analysis/{chat_id}` | –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ |
| `GET` | `/dashboard` | –î–∞—à–±–æ—Ä–¥ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π |
| `POST` | `/send_test` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Wazzup |

### Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost:8000/docs`

---

## –†–∞–±–æ—Ç–∞ —Å –¥–∏–∞–ª–æ–≥–∞–º–∏

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤
```bash
# –ü—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ curl
curl "http://localhost:8000/chats?limit=10&offset=0"

# –° —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
curl "http://localhost:8000/chats?status=active&manager_id=default"
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (default: 50) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `offset` (default: 0) ‚Äî —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- `status` ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (active/closed)
- `manager_id` ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–µ–Ω–µ–¥–∂–µ—Ä—É

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞
```bash
curl "http://localhost:8000/chats/79123456789"
```

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏–∞–ª–æ–≥–∞
```json
{
  "chat": {
    "id": "79123456789",
    "client_number": "79123456789",
    "manager_id": "default",
    "messages": [
      {
        "id": "msg_123",
        "role": "client",
        "text": "–î–æ–±—Ä—ã–π –¥–µ–Ω—å!",
        "timestamp": "2024-01-20T10:05:00",
        "source": "wazzup"
      }
    ],
    "created_at": "2024-01-20T10:05:00",
    "last_updated": "2024-01-20T10:10:00",
    "status": "active"
  }
}
```

---

## AI –ê–Ω–∞–ª–∏–∑ –¥–∏–∞–ª–æ–≥–æ–≤

### 1. –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
```bash
# –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
curl -X POST "http://localhost:8000/analyze/79123456789"

# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
curl -X POST "http://localhost:8000/analyze/79123456789?force=true&background=false"
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `force` (default: false) ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –¥–∞–∂–µ –µ—Å–ª–∏ —É–∂–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è
- `background` (default: false) ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
```bash
# –ü–æ–ª–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
curl "http://localhost:8000/analysis/79123456789"

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
curl "http://localhost:8000/analysis/79123456789?pretty=true"
```

### 3. –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞
```json
{
  "summary": "–î–∏–∞–ª–æ–≥ –æ –¥–æ—Å—Ç–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞. –ú–µ–Ω–µ–¥–∂–µ—Ä –æ—Ç–≤–µ—Ç–∏–ª –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ, –Ω–æ –±—ã–ª –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–µ–∂–ª–∏–≤.",
  "scores": {
    "politeness": 6,
    "professionalism": 8,
    "proactivity": 5,
    "response_speed": 9,
    "whatsapp_effectiveness": 7
  },
  "total_score": 35,
  "key_errors": ["–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞", "–ù–µ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –ø–æ–º–æ—â—å –≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏"],
  "improvement_suggestions": ["–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏", "–ü—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏"],
  "alternative_phrases": {
    "–û—Ç–ø—Ä–∞–≤–∏–ª–∏ –≤—á–µ—Ä–∞": "–í–∞—à –∑–∞–∫–∞–∑ –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤—á–µ—Ä–∞, 20 —è–Ω–≤–∞—Ä—è"
  },
  "verdict": "–•–æ—Ä–æ—à–æ üëç",
  "grade": "B",
  "analysis_metadata": {
    "model_used": "gpt-4o-mini",
    "analyzed_at": "2024-01-20T12:30:00",
    "message_count": 6,
    "manager_messages": 3,
    "client_messages": 3,
    "score_percentage": 70
  }
}
```

---

## –î–∞—à–±–æ—Ä–¥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### 1. –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```bash
curl "http://localhost:8000/dashboard"
```

**–û—Ç–≤–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç:**
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –°—Ä–µ–¥–Ω—é—é –æ—Ü–µ–Ω–∫—É –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –ê–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞)
- –¢–æ–ø –æ—à–∏–±–æ–∫
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º

### 2. –ú–µ–Ω–µ–¥–∂–µ—Ä—ã
–ö–∞–∂–¥–æ–º—É –º–µ–Ω–µ–¥–∂–µ—Ä—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è —Ä–µ–π—Ç–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –µ–≥–æ –¥–∏–∞–ª–æ–≥–æ–≤:
- **A (45-50 –±–∞–ª–ª–æ–≤)** ‚Äî –û—Ç–ª–∏—á–Ω–æ
- **B (35-44 –±–∞–ª–ª–æ–≤)** ‚Äî –•–æ—Ä–æ—à–æ
- **C (25-34 –±–∞–ª–ª–æ–≤)** ‚Äî –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ
- **D (15-24 –±–∞–ª–ª–æ–≤)** ‚Äî –¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è
- **F (0-14 –±–∞–ª–ª–æ–≤)** ‚Äî –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –ø–ª–æ—Ö–æ

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### 1. –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –±–µ–∑ WhatsApp
```bash
# –¢–µ—Å—Ç —ç–º—É–ª—è—Ü–∏–µ–π –¥–∏–∞–ª–æ–≥–∞
python real_test.py

# –í—ã–±–∏—Ä–∞–µ–º —Å—Ü–µ–Ω–∞—Ä–∏–π:
# 1 - –ü–ª–æ—Ö–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä (–ø–æ–∫–∞–∂–µ—Ç –æ—à–∏–±–∫–∏)
# 2 - –•–æ—Ä–æ—à–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä (–≤—ã—Å–æ–∫–∞—è –æ—Ü–µ–Ω–∫–∞)
# 3 - –û–±—ã—á–Ω—ã–π –¥–∏–∞–ª–æ–≥
```

### 2. –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä –≤ –æ–¥–Ω–æ–º –æ–∫–Ω–µ
python run_server.py

# –í –¥—Ä—É–≥–æ–º –æ–∫–Ω–µ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã
python test_wazzup.py

# –ò–ª–∏ –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç
python test_connection.py
```

### 3. –¢–µ—Å—Ç–æ–≤—ã–µ –≤–µ–±—Ö—É–∫–∏
–ü—Ä–∏–º–µ—Ä JSON –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≤–µ–±—Ö—É–∫–∞:
```json
{
  "type": "message",
  "message": {
    "id": "msg_123",
    "chatId": "79123456789",
    "text": "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –¢–µ—Å—Ç–∏—Ä—É—é —Å–∏—Å—Ç–µ–º—É.",
    "sender": {
      "type": "contact",
      "name": "–¢–µ—Å—Ç –ö–ª–∏–µ–Ω—Ç",
      "id": "79123456789"
    },
    "timestamp": 1705762800
  }
}
```

–û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ curl:
```bash
curl -X POST "http://localhost:8000/webhook/wazzup" \
  -H "Content-Type: application/json" \
  -d '{"type":"message","message":{"id":"msg_123","chatId":"79123456789","text":"–ü—Ä–∏–≤–µ—Ç!","sender":{"type":"contact","name":"–ö–ª–∏–µ–Ω—Ç","id":"79123456789"},"timestamp":1705762800}}'
```

---

## –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –ò–ò
–ü—Ä–æ–º–ø—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `analyzer.py` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `get_analysis_prompt()`. –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏
- –í–µ—Å–∞ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
- –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞
- –ü—Ä–∏–º–µ—Ä—ã —Ö–æ—Ä–æ—à–∏—Ö/–ø–ª–æ—Ö–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
–í `main.py` —Ñ—É–Ω–∫—Ü–∏—è `should_auto_analyze()` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
```python
# –¢–µ–∫—É—â–∏–µ —É—Å–ª–æ–≤–∏—è:
# - –ú–∏–Ω–∏–º—É–º 3 —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –¥–∏–∞–ª–æ–≥–µ
# - –ú–∏–Ω–∏–º—É–º 2 —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞
# - –ù–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
–ú–µ–Ω–µ–¥–∂–µ—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `managers_db`. –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:
```python
# –í main.py –¥–æ–±–∞–≤—å
managers_db["manager_2"] = {
    "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤", 
    "rating": 0, 
    "total_chats": 0
}
```

---

## –ü–æ–∏—Å–∫ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: OpenAI –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ "OpenAI API key not configured"
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å `.env` —Ñ–∞–π–ª
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ –∫–ª—é—á –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-`
3. –ü—Ä–æ–≤–µ—Ä—å –±–∞–ª–∞–Ω—Å –Ω–∞ platform.openai.com

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º:** –í–µ–±—Ö—É–∫ –ø—Ä–∏—Ö–æ–¥–∏—Ç, –Ω–æ –≤ `/chats` –ø—É—Å—Ç–æ
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç –≤–µ–±—Ö—É–∫–∞ (–¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å Wazzup API v3)
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π `test_wazzup.py` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –û—à–∏–±–∫–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
**–°–∏–º–ø—Ç–æ–º:** –ò—Å–∫–∞–∂–µ–Ω–Ω—ã–µ —Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã –≤ –∞–Ω–∞–ª–∏–∑–µ
**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π `analyzer.py` –≤–º–µ—Å—Ç–æ `analyzer_fixed.py`
2. –î–æ–±–∞–≤—å –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞: `# -*- coding: utf-8 -*-`
3. –£–±–µ–¥–∏—Å—å —á—Ç–æ JSON —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å `ensure_ascii=False`

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ò—Å–ø—Ä–∞–≤—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python fix_deps.py

# 2. –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç
netstat -an | find "8000"  # Windows
lsof -i :8000  # Linux/Mac

# 3. –ó–∞–ø—É—Å—Ç–∏ —Å –¥—Ä—É–≥–∏–º –ø–æ—Ä—Ç–æ–º
python main.py --port 8080
```

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### 1. –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ `logs/`:
- `chat_{–Ω–æ–º–µ—Ä}.json` ‚Äî —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–∏–∞–ª–æ–≥–æ–≤
- `analysis_{chat_id}.json` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl "http://localhost:8000/health"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
# –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8000/docs
```

### 3. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- `data/chats_backup.json`
- `data/analyses_backup.json`

–î–ª—è —Ä—É—á–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: –æ—Å—Ç–∞–Ω–æ–≤–∏ —Å–µ—Ä–≤–µ—Ä (Ctrl+C) ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## –ß–µ–∫–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞

- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python 3.8+
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`requirements.txt`)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω `.env` —Ñ–∞–π–ª —Å OpenAI –∫–ª—é—á–æ–º
- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (`python run_server.py`)
- [ ] OpenAI –æ—Ç–≤–µ—á–∞–µ—Ç (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ `/health`)
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ (`python real_test.py`)
- [ ] –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ (POST `/analyze/{chat_id}`)
- [ ] –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏: –Ω–∞—Å—Ç—Ä–æ–µ–Ω Wazzup –∏ –≤–µ–±—Ö—É–∫

---

–î–ª—è –±—ã—Å—Ç—Ä—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤: –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `/docs` –∏ –ª–æ–≥–∏ –≤ –ø–∞–ø–∫–µ `logs/`.
